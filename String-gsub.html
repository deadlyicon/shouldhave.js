<!DOCTYPE html>
<html lang="en"><head><title>shouldhave.js</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="Everything JavaScript should have :D"><link rel="stylesheet" href="/shouldhave.js/main.css"></head><body><div class="container-fluid"><nav class="navbar navbar-dark bg-inverse"><a href="/shouldhave.js" class="navbar-brand">shouldhave.js</a><ul class="nav navbar-nav"><li class="nav-item"><div class="nav-link">Everything JavaScript should have.</div></li></ul><ul class="nav navbar-nav pull-right"><li class="nav-item"><a href="/shouldhave.js/docs" class="nav-link">Docs</a></li><li class="nav-item"><a href="https://github.com/deadlyicon/shouldhave.js" class="nav-link">Code</a></li></ul></nav><h1 id="string-gsub">String#gsub</h1>
<h2 id="source">Source</h2>
<pre><code class="lang-js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'./Object.isFunction'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'./Object.isString'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'./RegExp.escape'</span>);

<span class="hljs-built_in">String</span>.prototype.gsub = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pattern, replacement</span>) </span>{
  <span class="hljs-keyword">var</span> result = <span class="hljs-string">''</span>, source = <span class="hljs-keyword">this</span>, match, replacer;

  replacer = <span class="hljs-built_in">Object</span>.isFunction(replacement) ?
    replacement :
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> replacement };

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.isString(pattern))
    pattern = <span class="hljs-built_in">RegExp</span>.escape(pattern);

  <span class="hljs-keyword">if</span> (pattern.length === <span class="hljs-number">0</span> || pattern.source === <span class="hljs-string">'(?:)'</span>){
    replacement = replacer(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">return</span> replacement + source.split(<span class="hljs-string">''</span>).join(replacement) + replacement;
  }

  <span class="hljs-keyword">while</span> (source.length &gt; <span class="hljs-number">0</span>) {
    match = source.match(pattern)
    <span class="hljs-keyword">if</span> (match &amp;&amp; match[<span class="hljs-number">0</span>].length &gt; <span class="hljs-number">0</span>) {
      result += source.slice(<span class="hljs-number">0</span>, match.index);
      result += replacer(match);
      source  = source.slice(match.index + match[<span class="hljs-number">0</span>].length);
    } <span class="hljs-keyword">else</span> {
      result += source;
      source = <span class="hljs-string">''</span>;
    }
  }
  <span class="hljs-keyword">return</span> result;
};

</code></pre>
<footer></footer></div><script src="/shouldhave.js/jquery.js"></script><script src="/shouldhave.js/bootstrap.js"></script></body></html>